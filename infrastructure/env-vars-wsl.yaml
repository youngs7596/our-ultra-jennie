#
# my-ultra-jennie 환경 변수 (WSL2 + Docker Compose)
# Cloud Run 없이 로컬/WSL2에서 실행하기 위한 기본값입니다.

# 1. 공통 런타임 설정
TRADING_MODE: "REAL"
DRY_RUN: "false"

# 2. KIS API Secret IDs (secrets.json 키 기준)
MOCK_SECRET_ID_APP_KEY: "kis-v-app-key"
MOCK_SECRET_ID_APP_SECRET: "kis-v-app-secret"
MOCK_SECRET_ID_ACCOUNT_PREFIX: "kis-v-account-no"
REAL_SECRET_ID_APP_KEY: "kis-r-app-key"
REAL_SECRET_ID_APP_SECRET: "kis-r-app-secret"
REAL_SECRET_ID_ACCOUNT_PREFIX: "kis-r-account-no"

# 3. Database 설정 (MariaDB 전용)
DB_TYPE: "MARIADB"
# WSL2 mirrored mode + network_mode: host → 127.0.0.1로 Windows MariaDB 접근
MARIADB_HOST: "127.0.0.1"
MARIADB_PORT: "3306"
MARIADB_USER: "root"                    # secrets.json의 mariadb-user 값으로 대체 가능
MARIADB_PASSWORD: "q1w2e3R$" # secrets.json의 mariadb-password 값으로 대체 가능  
MARIADB_DBNAME: "jennie_db"
SQLALCHEMY_POOL_SIZE: "5"
SQLALCHEMY_MAX_OVERFLOW: "20"

# 4. KIS API Base URLs
KIS_BASE_URL_MOCK: "https://openapivts.koreainvestment.com:29443"
KIS_BASE_URL_REAL: "https://openapi.koreainvestment.com:9443"

# 5. Gemini & OAuth
SECRET_ID_GEMINI_API_KEY: "gemini-api-key"
SECRET_ID_GOOGLE_OAUTH_CLIENT_ID: "google-oauth-client-id"
SECRET_ID_GOOGLE_OAUTH_CLIENT_SECRET: "google-oauth-client-secret"
SECRET_ID_ALLOWED_EMAILS: "allowed-emails"

# 6. 투자 및 토큰 설정
INVESTMENT_AMOUNT: "1000000"
DAILY_BUY_LIMIT_AMOUNT: "1000000"
KIS_TOKEN_FILE_PATH: "/tmp/kis_token.json"
KIS_ACCOUNT_SUFFIX: "01"

# 7. 하락장 대응 (LLM 기반)
ALLOW_BEAR_TRADING: "true"
MIN_LLM_CONFIDENCE_BEAR: "80"
BEAR_POSITION_RATIO: "0.2"
BEAR_STOP_LOSS_ATR_MULT: "2.0"
BEAR_FIRST_TP_PCT: "0.03"
BEAR_PARTIAL_CLOSE_RATIO: "0.5"
BEAR_VOLUME_SPIKE_MULTIPLIER: "1.5"

# 8. Gateway / Redis / Chroma
USE_KIS_GATEWAY: "true"
# network_mode: host 사용 시 127.0.0.1로 접근
KIS_GATEWAY_URL: "http://127.0.0.1:8080"
USE_GATEWAY_AUTH: "false"
USE_DISTRIBUTED_AUTH: "false"
# network_mode: host 사용 시 127.0.0.1로 접근
REDIS_URL: "redis://127.0.0.1:6379"
CHROMA_SERVER_HOST: "127.0.0.1"
CHROMA_PORT: "8000"
CIRCUIT_BREAKER_FAIL_MAX: "20"
CIRCUIT_BREAKER_TIMEOUT: "60"

# 9. RabbitMQ 설정 (Cloud Tasks 대체)
USE_RABBITMQ: "true"
USE_CLOUD_TASKS: "false"
# network_mode: host 사용 시 127.0.0.1로 접근
RABBITMQ_URL: "amqp://guest:guest@127.0.0.1:5672/"
RABBITMQ_QUEUE_SELL_ORDERS: "sell-orders"

# 10. Pub/Sub Emulator (로컬 기본값)
PUBSUB_EMULATOR_HOST: "pubsub-emulator:8085"

# 11. 뉴스 감성 분석 설정
MAX_SENTIMENT_DOCS_PER_RUN: "40"
SENTIMENT_COOLDOWN_SECONDS: "0.2"

# 12. 로깅
LOG_LEVEL: "INFO"
PYTHONPATH: "/app"

# 13. Scheduler (로컬 운영용)
SCHEDULER_SCOPE: "real"
SCHEDULER_SERVICE_URL: "http://127.0.0.1:8095"  # network_mode: host용
SCHEDULER_DB_PATH: "/app/data/scheduler.db"
SCHEDULER_TICK_SECONDS: "5"
SCHEDULER_TIMEZONE: "Asia/Seoul"
SCHEDULER_QUEUE_BUY_SCANNER: "real.jobs.buy-scanner"
SCHEDULER_QUEUE_NEWS_CRAWLER: "real.jobs.news-crawler"
ENABLE_BUY_SCANNER_JOB_WORKER: "true"
ENABLE_NEWS_CRAWLER_JOB_WORKER: "true"
SCHEDULER_QUEUE_PRICE_MONITOR: "real.jobs.price-monitor"
ENABLE_PRICE_MONITOR_JOB_WORKER: "true"
SCHEDULER_QUEUE_SCOUT_JOB: "real.jobs.scout"
ENABLE_SCOUT_JOB_WORKER: "true"
SCHEDULER_SCOUT_JOB_ID: "scout-daily"  # jobs 테이블의 job_id와 일치해야 함

# 14. 매수 기준 점수 (B등급 이상)
MIN_LLM_SCORE: "70"

# 15. Scout Job LLM 최적화 설정
SCOUT_MIN_LLM_INTERVAL_MINUTES: "60"        # LLM 호출 최소 간격 (1시간)
SCOUT_LLM_CACHE_TTL_MINUTES: "240"          # LLM 캐시 유효기간 (4시간) - 시장 변화 반영
SCOUT_LLM_MAX_WORKERS: "4"                  # LLM 동시 호출 최대 수 (Claude Rate Limit 고려)
SCOUT_PHASE2_MAX_ENTRIES: "50"              # Phase 2 진입 최대 종목 수 (상위 N개만)
